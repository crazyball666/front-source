(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{143:function(t,e,n){"use strict";n.r(e);var i=n(413),o=n(303);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n(395);var r=n(91),s=Object(r.a)(o.default,i.a,i.b,!1,null,"36c7cf54",null);s.options.__file="src/page/blog/article-add.vue",e.default=s.exports},294:function(t,e,n){"use strict";function i(t){return!!t&&(t instanceof HTMLCollection||t instanceof NodeList)}Object.defineProperty(e,"__esModule",{value:!0});var o=[];function a(t){if(t){if(t instanceof a)return t;this.selector=t;var e=t.nodeType,n=[];9===e?n=[t]:1===e?n=[t]:i(t)||t instanceof Array?n=t:"string"==typeof t&&(n=0===(t=t.replace("/\n/mg","").trim()).indexOf("<")?function(t){var e=void 0;return(e=document.createElement("div")).innerHTML=t,e.children}(t):function(t){var e=document.querySelectorAll(t);return i(e)?e:[e]}(t));var o=n.length;if(!o)return this;var r=void 0;for(r=0;r<o;r++)this[r]=n[r];this.length=o}}function r(t){return new a(t)}a.prototype={constructor:a,forEach:function(t){var e=void 0;for(e=0;e<this.length;e++){var n=this[e];if(!1===t.call(n,n,e))break}return this},clone:function(t){var e=[];return this.forEach(function(n){e.push(n.cloneNode(!!t))}),r(e)},get:function(t){var e=this.length;return t>=e&&(t%=e),r(this[t])},first:function(){return this.get(0)},last:function(){var t=this.length;return this.get(t-1)},on:function(t,e,n){n||(n=e,e=null);var i=[];return i=t.split(/\s+/),this.forEach(function(t){i.forEach(function(i){i&&(o.push({elem:t,type:i,fn:n}),e?t.addEventListener(i,function(t){var i=t.target;i.matches(e)&&n.call(i,t)}):t.addEventListener(i,n))})})},off:function(t,e){return this.forEach(function(n){n.removeEventListener(t,e)})},attr:function(t,e){return null==e?this[0].getAttribute(t):this.forEach(function(n){n.setAttribute(t,e)})},removeAttr:function(t){this.forEach(function(e){e.removeAttribute(t)})},addClass:function(t){return t?this.forEach(function(e){var n=void 0;e.className?((n=(n=e.className.split(/\s/)).filter(function(t){return!!t.trim()})).indexOf(t)<0&&n.push(t),e.className=n.join(" ")):e.className=t}):this},removeClass:function(t){return t?this.forEach(function(e){var n=void 0;e.className&&(n=(n=e.className.split(/\s/)).filter(function(e){return!(!(e=e.trim())||e===t)}),e.className=n.join(" "))}):this},css:function(t,e){var n=t+":"+e+";";return this.forEach(function(e){var i=(e.getAttribute("style")||"").trim(),o=[];i?(i.split(";").forEach(function(t){var e=t.split(":").map(function(t){return t.trim()});2===e.length&&o.push(e[0]+":"+e[1])}),(o=o.map(function(e){return 0===e.indexOf(t)?n:e})).indexOf(n)<0&&o.push(n),e.setAttribute("style",o.join("; "))):e.setAttribute("style",n)})},show:function(){return this.css("display","block")},hide:function(){return this.css("display","none")},children:function(){var t=this[0];return t?r(t.children):null},childNodes:function(){var t=this[0];return t?r(t.childNodes):null},append:function(t){return this.forEach(function(e){t.forEach(function(t){e.appendChild(t)})})},remove:function(){return this.forEach(function(t){if(t.remove)t.remove();else{var e=t.parentElement;e&&e.removeChild(t)}})},isContain:function(t){var e=this[0],n=t[0];return e.contains(n)},getSizeData:function(){return this[0].getBoundingClientRect()},getNodeName:function(){return this[0].nodeName},find:function(t){return r(this[0].querySelectorAll(t))},text:function(t){return t?this.forEach(function(e){e.innerHTML=t}):this[0].innerHTML.replace(/<.*?>/g,function(){return""})},html:function(t){var e=this[0];return null==t?e.innerHTML:(e.innerHTML=t,this)},val:function(){return this[0].value.trim()},focus:function(){return this.forEach(function(t){t.focus()})},parent:function(){return r(this[0].parentElement)},parentUntil:function(t,e){var n=document.querySelectorAll(t),i=n.length;if(!i)return null;var o=e||this[0];if("BODY"===o.nodeName)return null;var a=o.parentElement,s=void 0;for(s=0;s<i;s++)if(a===n[s])return r(a);return this.parentUntil(t,a)},equal:function(t){return 1===t.nodeType?this[0]===t:this[0]===t[0]},insertBefore:function(t){var e=r(t)[0];return e?this.forEach(function(t){e.parentNode.insertBefore(t,e)}):this},insertAfter:function(t){var e=r(t)[0];return e?this.forEach(function(t){var n=e.parentNode;n.lastChild===e?n.appendChild(t):n.insertBefore(t,e.nextSibling)}):this}},r.offAll=function(){o.forEach(function(t){var e=t.elem,n=t.type,i=t.fn;e.removeEventListener(n,i)})},e.default=r},295:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.objForEach=function(t,e){var n=void 0;for(n in t)if(t.hasOwnProperty(n)&&!1===e.call(t,n,t[n]))break},e.arrForEach=function(t,e){var n=void 0,i=void 0,o=t.length||0;for(n=0;n<o&&(i=t[n],!1!==e.call(t,i,n));n++);},e.getRandom=function(t){return t+Math.random().toString().slice(2)},e.replaceHtmlSymbol=function(t){if(null==t)return"";return t.replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/(\r\n|\r|\n)/g,"<br/>")},e.percentFormat=function(t){return(t=parseInt(100*t))+"%"},e.isFunction=function(t){return"function"==typeof t};e.UA={_ua:navigator.userAgent,isWebkit:function(){return/webkit/i.test(this._ua)},isIE:function(){return"ActiveXObject"in window}}},297:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(89)),o=r(n(90)),a=r(n(140));function r(t){return t&&t.__esModule?t:{default:t}}var s="https://www.crazyball.xyz";e.default={getArticleList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(0,o.default)(i.default.mark(function o(){var r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.get(s+"/article?page="+e+"&limit="+n);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},o,t)}))()},createArticle:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.post(s+"/article/create",t);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},n,e)}))()},deleteArticle:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.delete(s+"/article/"+t);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},n,e)}))()},updateArticle:function(t,e){var n=this;return(0,o.default)(i.default.mark(function o(){var r;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.default.put(s+"/article/"+t,e);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}},o,n)}))()},getArticle:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.get(s+"/article/detail/"+t);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},n,e)}))()},publishArticle:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.post(s+"/article/publish/"+t);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},n,e)}))()},unpublishArticle:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.post(s+"/article/unpublish/"+t);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},n,e)}))()},getAllTags:function(){var t=this;return(0,o.default)(i.default.mark(function e(){var n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.get(s+"/tag/all");case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},e,t)}))()},getTagList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(0,o.default)(i.default.mark(function o(){var r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.get(s+"/tag?page="+e+"&limit="+n);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},o,t)}))()},createTag:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.post(s+"/tag/create",t);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},n,e)}))()},deleteTag:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.delete(s+"/tag/"+t);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},n,e)}))()},updateTag:function(t,e){var n=this;return(0,o.default)(i.default.mark(function o(){var r;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.default.put(s+"/tag/"+t,{content:e});case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}},o,n)}))()},getCommentList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(0,o.default)(i.default.mark(function o(){var r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.get(s+"/comment?page="+e+"&limit="+n);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},o,t)}))()},showComment:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.post(s+"/comment/show/"+t);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},n,e)}))()},hideComment:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.post(s+"/comment/hide/"+t);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},n,e)}))()},deleteComment:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.delete(s+"/comment/"+t);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},n,e)}))()},getConfig:function(){var t=this;return(0,o.default)(i.default.mark(function e(){var n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.get(s+"/conf");case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},e,t)}))()},setConfig:function(t){var e=this;return(0,o.default)(i.default.mark(function n(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,a.default.post(s+"/conf",{blog_name:t.blog_name,avatar:t.avatar,description:t.description,default_article_img:t.default_article_img,about_me_img:t.about_me_img});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}},n,e)}))()}}},298:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(294)),o=a(n(356));function a(t){return t&&t.__esModule?t:{default:t}}var r=function(){};function s(t,e){var n=this,a=t.editor;this.menu=t,this.opt=e;var s=(0,i.default)('<div class="w-e-droplist"></div>'),l=e.$title,c=void 0;l&&(c=l.html(),c=(0,o.default)(a,c),l.html(c),l.addClass("w-e-dp-title"),s.append(l));var u=e.list||[],d=e.type||"list",f=e.onClick||r,h=(0,i.default)('<ul class="'+("list"===d?"w-e-list":"w-e-block")+'"></ul>');s.append(h),u.forEach(function(t){var e=t.$elem,r=e.html();r=(0,o.default)(a,r),e.html(r);var s=t.value,l=(0,i.default)('<li class="w-e-item"></li>');e&&(l.append(e),h.append(l),l.on("click",function(t){f(s),n.hideTimeoutId=setTimeout(function(){n.hide()},0)}))}),s.on("mouseleave",function(t){n.hideTimeoutId=setTimeout(function(){n.hide()},0)}),this.$container=s,this._rendered=!1,this._show=!1}s.prototype={constructor:s,show:function(){this.hideTimeoutId&&clearTimeout(this.hideTimeoutId);var t=this.menu.$elem,e=this.$container;if(!this._show){if(this._rendered)e.show();else{var n=t.getSizeData().height||0,i=this.opt.width||100;e.css("margin-top",n+"px").css("width",i+"px"),t.append(e),this._rendered=!0}this._show=!0}},hide:function(){this.showTimeoutId&&clearTimeout(this.showTimeoutId);var t=this.$container;this._show&&(t.hide(),this._show=!1)}},e.default=s},299:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(294)),o=a(n(356));function a(t){return t&&t.__esModule?t:{default:t}}var r=function(){},s=[];function l(t,e){this.menu=t,this.opt=e}l.prototype={constructor:l,show:function(){var t=this,e=this.menu;if(!(s.indexOf(e)>=0)){var n=e.editor,a=(0,i.default)("body"),l=n.$textContainerElem,c=this.opt,u=(0,i.default)('<div class="w-e-panel-container"></div>'),d=c.width||300;u.css("width",d+"px").css("margin-left",(0-d)/2+"px");var f=(0,i.default)('<i class="w-e-icon-close w-e-panel-close"></i>');u.append(f),f.on("click",function(){t.hide()});var h=(0,i.default)('<ul class="w-e-panel-tab-title"></ul>'),p=(0,i.default)('<div class="w-e-panel-tab-content"></div>');u.append(h).append(p);var m=c.height;m&&p.css("height",m+"px").css("overflow-y","auto");var v=c.tabs||[],g=[],_=[];v.forEach(function(t,e){if(t){var a=t.title||"",r=t.tpl||"";a=(0,o.default)(n,a),r=(0,o.default)(n,r);var s=(0,i.default)('<li class="w-e-item">'+a+"</li>");h.append(s);var l=(0,i.default)(r);p.append(l),s._index=e,g.push(s),_.push(l),0===e?(s._active=!0,s.addClass("w-e-active")):l.hide(),s.on("click",function(t){s._active||(g.forEach(function(t){t._active=!1,t.removeClass("w-e-active")}),_.forEach(function(t){t.hide()}),s._active=!0,s.addClass("w-e-active"),l.show())})}}),u.on("click",function(t){t.stopPropagation()}),a.on("click",function(e){t.hide()}),l.append(u),v.forEach(function(e,n){e&&(e.events||[]).forEach(function(e){var i=e.selector,o=e.type,a=e.fn||r;_[n].find(i).on(o,function(e){e.stopPropagation(),a(e)&&t.hide()})})});var y=u.find("input[type=text],textarea");y.length&&y.get(0).focus(),this.$container=u,this._hideOtherPanels(),s.push(e)}},hide:function(){var t=this.menu,e=this.$container;e&&e.remove(),s=s.filter(function(e){return e!==t})},_hideOtherPanels:function(){s.length&&s.forEach(function(t){var e=t.panel||{};e.hide&&e.hide()})}},e.default=l},303:function(t,e,n){"use strict";n.r(e);var i=n(304),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e.default=o.a},304:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n(89)),o=c(n(90)),a=c(n(359)),r=n(92),s=c(n(297)),l=c(n(357));function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Editor:a.default},data:function(){return{loadingArticle:!1,loading:!1,pid:null,tagList:[],title:"",tags:[],summary:"",content:"",picture:"",loadingStyle:{height:"0"},isSetupEditor:!1,isShowEditor:!1}},mounted:function(){var t=this;return(0,o.default)(i.default.mark(function e(){var n,o,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingArticle=!0,e.next=3,s.default.getAllTags();case 3:if(n=e.sent,t.tagList=n.data,t.loadingArticle=!1,"articleEdit"!=t.$route.name){e.next=19;break}return t.loadingArticle=!0,e.prev=8,t.pid=t.$route.params.pid,e.next=12,s.default.getArticle(t.$route.params.pid);case 12:1e3==(o=e.sent).code&&(t.title=o.data.title,t.summary=o.data.summary,t.content=o.data.content,t.picture=o.data.picture,a=o.data.tags.map(function(t){return t.content}),t.tagList.forEach(function(e){a.includes(e.content)&&t.tags.push(e.pid)})),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(8);case 18:t.loadingArticle=!1;case 19:t.$nextTick(function(){this.isSetupEditor=!0});case 20:case"end":return e.stop()}},e,t,[[8,16]])}))()},methods:{onEditorChange:function(t){this.content=t},handleSubmit:function(){var t=this;this.loadingArticle=!0,this.loading=!0;var e={title:this.title,tags:this.tags.join(","),summary:this.summary,content:this.content,picture:this.picture};this.pid?s.default.updateArticle(this.pid,e).then(function(e){t.loading=!1,t.loadingArticle=!1,r.Message.success("修改成功")}).catch(function(e){t.loading=!1,t.loadingArticle=!1}):s.default.createArticle(e).then(function(e){t.loading=!1,t.loadingArticle=!1,r.Message.success("创建成功"),t.$router.push("/blog/article-list")}).catch(function(e){t.loading=!1,t.loadingArticle=!1})},uploadImg:function(t){var e=this;this.picture="",l.default.uploadFiles(t.file,function(t){e.loadingStyle.height=t+"%"}).then(function(t){1e3==t.code&&(r.Message.success("上传成功"),e.picture="//"+t.data[0])}).catch(function(t){r.Message.error(t)})}}}},305:function(t,e,n){"use strict";n.r(e);var i=n(306),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e.default=o.a},306:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(360));n(393);var o=n(92),a=r(n(357));function r(t){return t&&t.__esModule?t:{default:t}}e.default={props:["value","setup","show"],data:function(){return{closeAnimation:!1,editor:null,editorUploadProgress:0}},mounted:function(){var t=this;this.createEditor(),document.querySelector(".editor-warp").addEventListener("animationend",function(e){t.closeAnimation&&(t.closeAnimation=!1,t.$emit("onClose"))})},watch:{value:function(t,e){this.setup||this.editor.txt.html(t)}},methods:{createEditor:function(){var t=this;this.editor=new i.default("#toolBar","#editor"),this.editor.customConfig.zIndex=100,this.editor.customConfig.onchange=function(e){t.$emit("change",e)},this.editor.customConfig.customUploadImg=function(e,n){a.default.uploadFiles(e,function(e){t.editorUploadProgress=parseFloat(e)}).then(function(e){t.editorUploadProgress=0,1e3==e.code&&(o.Message.success("上传成功"),e.data.forEach(function(t){n("//"+t)}))}).catch(function(e){t.editorUploadProgress=0,o.Message.error(e)})},this.editor.create()},onSave:function(){this.$emit("onSave")},onClose:function(){this.closeAnimation=!0}}}},307:function(t,e,n){},308:function(t,e,n){},356:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=e;return(t.config.langArgs||[]).forEach(function(t){var e=t.reg,i=t.val;e.test(n)&&(n=n.replace(e,function(){return i}))}),n}},357:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(89)),o=r(n(90)),a=r(n(140));function r(t){return t&&t.__esModule?t:{default:t}}e.default={uploadFiles:function(t,e){var n=this;return(0,o.default)(i.default.mark(function o(){var r,s,l;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=new FormData,!Array.isArray(t)){n.next=5;break}t.forEach(function(t){if(t.size>5242880)throw new Error("file is too large");r.append("files",t)}),n.next=8;break;case 5:if(!(t.size>5242880)){n.next=7;break}throw new Error("file is too large");case 7:r.append("files",t);case 8:return s={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var n=t.loaded/t.total*100|0;e&&e(n)}},n.next=11,a.default.post("https://file.crazyball.xyz/api/upload",r,s);case 11:return l=n.sent,n.abrupt("return",l);case 13:case"end":return n.stop()}},o,n)}))()}}},359:function(t,e,n){"use strict";n.r(e);var i=n(430),o=n(305);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n(394);var r=n(91),s=Object(r.a)(o.default,i.a,i.b,!1,null,null,null);s.options.__file="src/components/Editor.vue",e.default=s.exports},360:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(361)),o=a(n(362));function a(t){return t&&t.__esModule?t:{default:t}}try{document}catch(t){throw new Error("请在浏览器环境下运行")}(0,i.default)(),e.default=window.wangEditor||o.default},361:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(142));e.default=function(){"function"!=typeof i.default&&(Object.assign=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1})}},362:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(n(142)),o=f(n(294)),a=f(n(363)),r=f(n(364)),s=f(n(387)),l=f(n(389)),c=f(n(390)),u=f(n(391)),d=n(295);function f(t){return t&&t.__esModule?t:{default:t}}var h=1;function p(t,e){if(null==t)throw new Error("错误：初始化编辑器时候未传入任何参数，请查阅文档");this.id="wangEditor-"+h++,this.toolbarSelector=t,this.textSelector=e,this.customConfig={}}p.prototype={constructor:p,_initConfig:function(){this.config=(0,i.default)({},a.default,this.customConfig);var t=this.config.lang||{},e=[];(0,d.objForEach)(t,function(t,n){e.push({reg:new RegExp(t,"img"),val:n})}),this.config.langArgs=e},_initDom:function(){var t=this,e=this.toolbarSelector,n=(0,o.default)(e),i=this.textSelector,a=this.config,r=a.zIndex,s=void 0,l=void 0,c=void 0,u=void 0;null==i?(s=(0,o.default)("<div></div>"),l=(0,o.default)("<div></div>"),u=n.children(),n.append(s).append(l),s.css("background-color","#f1f1f1").css("border","1px solid #ccc"),l.css("border","1px solid #ccc").css("border-top","none").css("height","300px")):(s=n,u=(l=(0,o.default)(i)).children()),(c=(0,o.default)("<div></div>")).attr("contenteditable","true").css("width","100%").css("height","100%"),u&&u.length?c.append(u):c.append((0,o.default)("<p><br></p>")),l.append(c),s.addClass("w-e-toolbar"),l.addClass("w-e-text-container"),l.css("z-index",r),c.addClass("w-e-text");var f=(0,d.getRandom)("toolbar-elem");s.attr("id",f);var h=(0,d.getRandom)("text-elem");c.attr("id",h),this.$toolbarElem=s,this.$textContainerElem=l,this.$textElem=c,this.toolbarElemId=f,this.textElemId=h;var p=!0;l.on("compositionstart",function(){p=!1}),l.on("compositionend",function(){p=!0}),l.on("click keyup",function(){p&&t.change&&t.change()}),s.on("click",function(){this.change&&this.change()}),(a.onfocus||a.onblur)&&(this.isFocus=!1,(0,o.default)(document).on("click",function(e){var n=c.isContain((0,o.default)(e.target)),i=s.isContain((0,o.default)(e.target)),a=s[0]==e.target;if(n)t.isFocus||t.onfocus&&t.onfocus(),t.isFocus=!0;else{if(i&&!a)return;t.isFocus&&t.onblur&&t.onblur(),t.isFocus=!1}}))},_initCommand:function(){this.cmd=new l.default(this)},_initSelectionAPI:function(){this.selection=new c.default(this)},_initUploadImg:function(){this.uploadImg=new u.default(this)},_initMenus:function(){this.menus=new r.default(this),this.menus.init()},_initText:function(){this.txt=new s.default(this),this.txt.init()},initSelection:function(t){var e=this.$textElem,n=e.children();if(!n.length)return e.append((0,o.default)("<p><br></p>")),void this.initSelection();var i=n.last();if(t){var a=i.html().toLowerCase(),r=i.getNodeName();if("<br>"!==a&&"<br/>"!==a||"P"!==r)return e.append((0,o.default)("<p><br></p>")),void this.initSelection()}this.selection.createRangeByElem(i,!1,!0),this.selection.restoreSelection()},_bindEvent:function(){var t=0,e=this.txt.html(),n=this.config,i=n.onchangeTimeout;(!(i=parseInt(i,10))||i<=0)&&(i=200);var o=n.onchange;o&&"function"==typeof o&&(this.change=function(){var n=this.txt.html();n.length===e.length&&n===e||(t&&clearTimeout(t),t=setTimeout(function(){o(n),e=n},i))});var a=n.onblur;a&&"function"==typeof a&&(this.onblur=function(){var t=this.txt.html();a(t)});var r=n.onfocus;r&&"function"==typeof r&&(this.onfocus=function(){r()})},create:function(){this._initConfig(),this._initDom(),this._initCommand(),this._initSelectionAPI(),this._initText(),this._initMenus(),this._initUploadImg(),this.initSelection(!0),this._bindEvent()},_offAllEvent:function(){o.default.offAll()}},e.default=p},363:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={menus:["clear","head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],fontNames:["宋体","微软雅黑","Arial","Tahoma","Verdana"],colors:["#000000","#eeece0","#1c487f","#4d80bf","#c24f4a","#8baa4a","#7b5ba1","#46acc8","#f9963b","#ffffff"],emotions:[{title:"默认",type:"image",content:[{alt:"[坏笑]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/50/pcmoren_huaixiao_org.png"},{alt:"[舔屏]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png"},{alt:"[污]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3c/pcmoren_wu_org.png"}]},{title:"新浪",type:"image",content:[{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif",alt:"[草泥马]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif",alt:"[神马]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif",alt:"[浮云]"}]},{title:"emoji",type:"emoji",content:"😀 😃 😄 😁 😆 😅 😂 😊 😇 🙂 🙃 😉 😓 😪 😴 🙄 🤔 😬 🤐".split(/\s/)}],zIndex:1e4,debug:!1,linkCheck:function(t,e){return!0},linkImgCheck:function(t){return!0},pasteFilterStyle:!0,pasteIgnoreImg:!1,pasteTextHandle:function(t){return t},showLinkImg:!0,linkImgCallback:function(t){},uploadImgMaxSize:5242880,uploadImgShowBase64:!1,uploadFileName:"",uploadImgParams:{},uploadImgHeaders:{},withCredentials:!1,uploadImgTimeout:1e4,uploadImgHooks:{before:function(t,e,n){},success:function(t,e,n){},fail:function(t,e,n){},error:function(t,e){},timeout:function(t,e){}},qiniu:!1};e.default=i},364:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(295),o=function(t){return t&&t.__esModule?t:{default:t}}(n(365));function a(t){this.editor=t,this.menus={}}a.prototype={constructor:a,init:function(){var t=this,e=this.editor;((e.config||{}).menus||[]).forEach(function(n){var i=o.default[n];i&&"function"==typeof i&&(t.menus[n]=new i(e))}),this._addToToolbar(),this._bindEvent()},_addToToolbar:function(){var t=this.editor,e=t.$toolbarElem,n=this.menus,o=t.config.zIndex+1;(0,i.objForEach)(n,function(t,n){var i=n.$elem;i&&(i.css("z-index",o),e.append(i))})},_bindEvent:function(){var t=this.menus,e=this.editor;(0,i.objForEach)(t,function(t,n){var i=n.type;if(i){var o=n.$elem,a=n.droplist;n.panel;"click"===i&&n.onClick&&o.on("click",function(t){null!=e.selection.getRange()&&n.onClick(t)}),"droplist"===i&&a&&o.on("mouseenter",function(t){null!=e.selection.getRange()&&(a.showTimeoutId=setTimeout(function(){a.show()},200))}).on("mouseleave",function(t){a.hideTimeoutId=setTimeout(function(){a.hide()},0)}),"panel"===i&&n.onClick&&o.on("click",function(t){t.stopPropagation(),null!=e.selection.getRange()&&n.onClick(t)})}})},changeActive:function(){var t=this.menus;(0,i.objForEach)(t,function(t,e){e.tryChangeActive&&setTimeout(function(){e.tryChangeActive()},100)})}},e.default=a},365:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=E(n(366)),o=E(n(367)),a=E(n(368)),r=E(n(369)),s=E(n(370)),l=E(n(371)),c=E(n(372)),u=E(n(373)),d=E(n(374)),f=E(n(375)),h=E(n(376)),p=E(n(377)),m=E(n(378)),v=E(n(379)),g=E(n(380)),_=E(n(381)),y=E(n(382)),b=E(n(383)),w=E(n(384)),x=E(n(385)),C=E(n(386));function E(t){return t&&t.__esModule?t:{default:t}}var k={};k.clear=i.default,k.bold=o.default,k.head=a.default,k.fontSize=r.default,k.fontName=s.default,k.link=l.default,k.italic=c.default,k.redo=u.default,k.strikeThrough=d.default,k.underline=f.default,k.undo=h.default,k.list=p.default,k.justify=m.default,k.foreColor=v.default,k.backColor=g.default,k.quote=_.default,k.code=y.default,k.emoticon=b.default,k.table=w.default,k.video=x.default,k.image=C.default,e.default=k},366:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294));function o(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu">\n            <i>Clear</i>\n        </div>'),this.type="click",this._active=!1}o.prototype={constructor:o,onClick:function(t){var e=this.editor,n=e.selection.isSelectionEmpty();n||(e.cmd.do("removeFormat"),n&&(e.selection.collapseRange(),e.selection.restoreSelection()))}},e.default=o},367:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294));function o(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu">\n            <i class="w-e-icon-bold"></i>\n        </div>'),this.type="click",this._active=!1}o.prototype={constructor:o,onClick:function(t){var e=this.editor,n=e.selection.isSelectionEmpty();n&&e.selection.createEmptyRange(),e.cmd.do("bold"),n&&(e.selection.collapseRange(),e.selection.restoreSelection())},tryChangeActive:function(t){var e=this.editor,n=this.$elem;e.cmd.queryCommandState("bold")?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}},e.default=o},368:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(294)),o=a(n(298));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=this;this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu"><i class="w-e-icon-header"></i></div>'),this.type="droplist",this._active=!1,this.droplist=new o.default(this,{width:100,$title:(0,i.default)("<p>设置标题</p>"),type:"list",list:[{$elem:(0,i.default)("<h1>H1</h1>"),value:"<h1>"},{$elem:(0,i.default)("<h2>H2</h2>"),value:"<h2>"},{$elem:(0,i.default)("<h3>H3</h3>"),value:"<h3>"},{$elem:(0,i.default)("<h4>H4</h4>"),value:"<h4>"},{$elem:(0,i.default)("<h5>H5</h5>"),value:"<h5>"},{$elem:(0,i.default)("<p>正文</p>"),value:"<p>"}],onClick:function(t){e._command(t)}})}r.prototype={constructor:r,_command:function(t){var e=this.editor,n=e.selection.getSelectionContainerElem();e.$textElem.equal(n)||e.cmd.do("formatBlock",t)},tryChangeActive:function(t){var e=this.editor,n=this.$elem,i=e.cmd.queryCommandValue("formatBlock");/^h/i.test(i)?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}},e.default=r},369:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(294)),o=a(n(298));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=this;this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu"><i class="w-e-icon-text-heigh"></i></div>'),this.type="droplist",this._active=!1,this.droplist=new o.default(this,{width:160,$title:(0,i.default)("<p>字号</p>"),type:"list",list:[{$elem:(0,i.default)('<span style="font-size: x-small;">x-small</span>'),value:"1"},{$elem:(0,i.default)('<span style="font-size: small;">small</span>'),value:"2"},{$elem:(0,i.default)("<span>normal</span>"),value:"3"},{$elem:(0,i.default)('<span style="font-size: large;">large</span>'),value:"4"},{$elem:(0,i.default)('<span style="font-size: x-large;">x-large</span>'),value:"5"},{$elem:(0,i.default)('<span style="font-size: xx-large;">xx-large</span>'),value:"6"}],onClick:function(t){e._command(t)}})}r.prototype={constructor:r,_command:function(t){this.editor.cmd.do("fontSize",t)}},e.default=r},370:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(294)),o=a(n(298));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=this;this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu"><i class="w-e-icon-font"></i></div>'),this.type="droplist",this._active=!1;var n=t.config.fontNames||[];this.droplist=new o.default(this,{width:100,$title:(0,i.default)("<p>字体</p>"),type:"list",list:n.map(function(t){return{$elem:(0,i.default)('<span style="font-family: '+t+';">'+t+"</span>"),value:t}}),onClick:function(t){e._command(t)}})}r.prototype={constructor:r,_command:function(t){this.editor.cmd.do("fontName",t)}},e.default=r},371:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(294)),o=n(295),a=r(n(299));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu"><i class="w-e-icon-link"></i></div>'),this.type="panel",this._active=!1}s.prototype={constructor:s,onClick:function(t){var e=this.editor,n=void 0;if(this._active){if(!(n=e.selection.getSelectionContainerElem()))return;e.selection.createRangeByElem(n),e.selection.restoreSelection(),this._createPanel(n.text(),n.attr("href"))}else e.selection.isSelectionEmpty()?this._createPanel("",""):this._createPanel(e.selection.getSelectionText(),"")},_createPanel:function(t,e){var n=this,r=(0,o.getRandom)("input-link"),s=(0,o.getRandom)("input-text"),l=(0,o.getRandom)("btn-ok"),c=(0,o.getRandom)("btn-del"),u=this._active?"inline-block":"none",d=new a.default(this,{width:300,tabs:[{title:"链接",tpl:'<div>\n                            <input id="'+s+'" type="text" class="block" value="'+t+'" placeholder="链接文字"/></td>\n                            <input id="'+r+'" type="text" class="block" value="'+e+'" placeholder="http://..."/></td>\n                            <div class="w-e-button-container">\n                                <button id="'+l+'" class="right">插入</button>\n                                <button id="'+c+'" class="gray right" style="display:'+u+'">删除链接</button>\n                            </div>\n                        </div>',events:[{selector:"#"+l,type:"click",fn:function(){var t=(0,i.default)("#"+r),e=(0,i.default)("#"+s),o=t.val(),a=e.val();return n._insertLink(a,o),!0}},{selector:"#"+c,type:"click",fn:function(){return n._delLink(),!0}}]}]});d.show(),this.panel=d},_delLink:function(){if(this._active){var t=this.editor;if(t.selection.getSelectionContainerElem()){var e=t.selection.getSelectionText();t.cmd.do("insertHTML","<span>"+e+"</span>")}}},_insertLink:function(t,e){var n=this.editor,i=n.config.linkCheck,o=!0;i&&"function"==typeof i&&(o=i(t,e)),!0===o?n.cmd.do("insertHTML",'<a href="'+e+'" target="_blank">'+t+"</a>"):alert(o)},tryChangeActive:function(t){var e=this.editor,n=this.$elem,i=e.selection.getSelectionContainerElem();i&&("A"===i.getNodeName()?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active")))}},e.default=s},372:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294));function o(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu">\n            <i class="w-e-icon-italic"></i>\n        </div>'),this.type="click",this._active=!1}o.prototype={constructor:o,onClick:function(t){var e=this.editor,n=e.selection.isSelectionEmpty();n&&e.selection.createEmptyRange(),e.cmd.do("italic"),n&&(e.selection.collapseRange(),e.selection.restoreSelection())},tryChangeActive:function(t){var e=this.editor,n=this.$elem;e.cmd.queryCommandState("italic")?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}},e.default=o},373:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294));function o(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu">\n            <i class="w-e-icon-redo"></i>\n        </div>'),this.type="click",this._active=!1}o.prototype={constructor:o,onClick:function(t){this.editor.cmd.do("redo")}},e.default=o},374:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294));function o(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu">\n            <i class="w-e-icon-strikethrough"></i>\n        </div>'),this.type="click",this._active=!1}o.prototype={constructor:o,onClick:function(t){var e=this.editor,n=e.selection.isSelectionEmpty();n&&e.selection.createEmptyRange(),e.cmd.do("strikeThrough"),n&&(e.selection.collapseRange(),e.selection.restoreSelection())},tryChangeActive:function(t){var e=this.editor,n=this.$elem;e.cmd.queryCommandState("strikeThrough")?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}},e.default=o},375:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294));function o(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu">\n            <i class="w-e-icon-underline"></i>\n        </div>'),this.type="click",this._active=!1}o.prototype={constructor:o,onClick:function(t){var e=this.editor,n=e.selection.isSelectionEmpty();n&&e.selection.createEmptyRange(),e.cmd.do("underline"),n&&(e.selection.collapseRange(),e.selection.restoreSelection())},tryChangeActive:function(t){var e=this.editor,n=this.$elem;e.cmd.queryCommandState("underline")?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}},e.default=o},376:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294));function o(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu">\n            <i class="w-e-icon-undo"></i>\n        </div>'),this.type="click",this._active=!1}o.prototype={constructor:o,onClick:function(t){this.editor.cmd.do("undo")}},e.default=o},377:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(294)),o=a(n(298));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=this;this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu"><i class="w-e-icon-list2"></i></div>'),this.type="droplist",this._active=!1,this.droplist=new o.default(this,{width:120,$title:(0,i.default)("<p>设置列表</p>"),type:"list",list:[{$elem:(0,i.default)('<span><i class="w-e-icon-list-numbered"></i> 有序列表</span>'),value:"insertOrderedList"},{$elem:(0,i.default)('<span><i class="w-e-icon-list2"></i> 无序列表</span>'),value:"insertUnorderedList"}],onClick:function(t){e._command(t)}})}r.prototype={constructor:r,_command:function(t){var e=this.editor,n=e.$textElem;if(e.selection.restoreSelection(),!e.cmd.queryCommandState(t)){e.cmd.do(t);var i=e.selection.getSelectionContainerElem();if("LI"===i.getNodeName()&&(i=i.parent()),!1!==/^ol|ul$/i.test(i.getNodeName())&&!i.equal(n)){var o=i.parent();o.equal(n)||(i.insertAfter(o),o.remove())}}},tryChangeActive:function(t){var e=this.editor,n=this.$elem;e.cmd.queryCommandState("insertUnOrderedList")||e.cmd.queryCommandState("insertOrderedList")?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}},e.default=r},378:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(294)),o=a(n(298));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=this;this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu"><i class="w-e-icon-paragraph-left"></i></div>'),this.type="droplist",this._active=!1,this.droplist=new o.default(this,{width:100,$title:(0,i.default)("<p>对齐方式</p>"),type:"list",list:[{$elem:(0,i.default)('<span><i class="w-e-icon-paragraph-left"></i> 靠左</span>'),value:"justifyLeft"},{$elem:(0,i.default)('<span><i class="w-e-icon-paragraph-center"></i> 居中</span>'),value:"justifyCenter"},{$elem:(0,i.default)('<span><i class="w-e-icon-paragraph-right"></i> 靠右</span>'),value:"justifyRight"}],onClick:function(t){e._command(t)}})}r.prototype={constructor:r,_command:function(t){this.editor.cmd.do(t)}},e.default=r},379:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(294)),o=a(n(298));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=this;this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu"><i class="w-e-icon-pencil2"></i></div>'),this.type="droplist";var n=t.config.colors||[];this._active=!1,this.droplist=new o.default(this,{width:120,$title:(0,i.default)("<p>文字颜色</p>"),type:"inline-block",list:n.map(function(t){return{$elem:(0,i.default)('<i style="color:'+t+';" class="w-e-icon-pencil2"></i>'),value:t}}),onClick:function(t){e._command(t)}})}r.prototype={constructor:r,_command:function(t){this.editor.cmd.do("foreColor",t)}},e.default=r},380:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(294)),o=a(n(298));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=this;this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu"><i class="w-e-icon-paint-brush"></i></div>'),this.type="droplist";var n=t.config.colors||[];this._active=!1,this.droplist=new o.default(this,{width:120,$title:(0,i.default)("<p>背景色</p>"),type:"inline-block",list:n.map(function(t){return{$elem:(0,i.default)('<i style="color:'+t+';" class="w-e-icon-paint-brush"></i>'),value:t}}),onClick:function(t){e._command(t)}})}r.prototype={constructor:r,_command:function(t){this.editor.cmd.do("backColor",t)}},e.default=r},381:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294)),o=n(295);function a(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu">\n            <i class="w-e-icon-quotes-left"></i>\n        </div>'),this.type="click",this._active=!1}a.prototype={constructor:a,onClick:function(t){var e=this.editor,n=e.selection.getSelectionContainerElem(),a=n.getNodeName();if(o.UA.isIE()){var r=void 0;if("P"===a)return r=n.text(),(0,i.default)("<blockquote>"+r+"</blockquote>").insertAfter(n),void n.remove();"BLOCKQUOTE"===a&&(r=n.text(),(0,i.default)("<p>"+r+"</p>").insertAfter(n),n.remove())}else"BLOCKQUOTE"===a?e.cmd.do("formatBlock","<P>"):e.cmd.do("formatBlock","<BLOCKQUOTE>")},tryChangeActive:function(t){var e=this.editor,n=this.$elem,i=e.cmd.queryCommandValue("formatBlock");/^BLOCKQUOTE$/i.test(i)?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}},e.default=a},382:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(294)),o=n(295),a=r(n(299));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu">\n            <i class="w-e-icon-terminal"></i>\n        </div>'),this.type="panel",this._active=!1}s.prototype={constructor:s,onClick:function(t){var e=this.editor,n=e.selection.getSelectionStartElem(),o=e.selection.getSelectionEndElem(),a=e.selection.isSelectionEmpty(),r=e.selection.getSelectionText(),s=void 0;if(n.equal(o))return a?void(this._active?this._createPanel(n.html()):this._createPanel()):(s=(0,i.default)("<code>"+r+"</code>"),e.cmd.do("insertElem",s),e.selection.createRangeByElem(s,!1),void e.selection.restoreSelection());e.selection.restoreSelection()},_createPanel:function(t){var e=this,n=(t=t||"")?"edit":"new",r=(0,o.getRandom)("texxt"),s=(0,o.getRandom)("btn"),l=new a.default(this,{width:500,tabs:[{title:"插入代码",tpl:'<div>\n                        <textarea id="'+r+'" style="height:145px;;">'+t+'</textarea>\n                        <div class="w-e-button-container">\n                            <button id="'+s+'" class="right">插入</button>\n                        </div>\n                    <div>',events:[{selector:"#"+s,type:"click",fn:function(){var t=(0,i.default)("#"+r),o=t.val()||t.html();return"new"===n?e._insertCode(o):e._updateCode(o),!0}}]}]});l.show(),this.panel=l},_insertCode:function(t){this.editor.cmd.do("insertHTML","<pre><code>"+t+"</code></pre><p><br></p>")},_updateCode:function(t){var e=this.editor,n=e.selection.getSelectionContainerElem();n&&(n.html(t),e.selection.restoreSelection())},tryChangeActive:function(t){var e=this.editor,n=this.$elem,i=e.selection.getSelectionContainerElem();if(i){var o=i.parent();"CODE"===i.getNodeName()&&"PRE"===o.getNodeName()?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}}},e.default=s},383:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(294)),o=a(n(299));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu">\n            <i class="w-e-icon-happy"></i>\n        </div>'),this.type="panel",this._active=!1}r.prototype={constructor:r,onClick:function(){this._createPanel()},_createPanel:function(){var t=this,e=[];(this.editor.config.emotions||[]).forEach(function(n){var o=n.type,a=n.content||[],r="";"emoji"===o&&a.forEach(function(t){t&&(r+='<span class="w-e-item">'+t+"</span>")}),"image"===o&&a.forEach(function(t){var e=t.src,n=t.alt;e&&(r+='<span class="w-e-item"><img src="'+e+'" alt="'+n+'" data-w-e="1"/></span>')}),e.push({title:n.title,tpl:'<div class="w-e-emoticon-container">'+r+"</div>",events:[{selector:"span.w-e-item",type:"click",fn:function(e){var n=e.target,o=(0,i.default)(n),a=void 0;return a="IMG"===o.getNodeName()?o.parent().html():"<span>"+o.html()+"</span>",t._insert(a),!0}}]})});var n=new o.default(this,{width:300,height:200,tabs:e});n.show(),this.panel=n},_insert:function(t){this.editor.cmd.do("insertHTML",t)}},e.default=r},384:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(294)),o=n(295),a=r(n(299));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu"><i class="w-e-icon-table2"></i></div>'),this.type="panel",this._active=!1}s.prototype={constructor:s,onClick:function(){this._active?this._createEditPanel():this._createInsertPanel()},_createInsertPanel:function(){var t=this,e=(0,o.getRandom)("btn"),n=(0,o.getRandom)("row"),r=(0,o.getRandom)("col"),s=new a.default(this,{width:250,tabs:[{title:"插入表格",tpl:'<div>\n                        <p style="text-align:left; padding:5px 0;">\n                            创建\n                            <input id="'+n+'" type="text" value="5" style="width:40px;text-align:center;"/>\n                            行\n                            <input id="'+r+'" type="text" value="5" style="width:40px;text-align:center;"/>\n                            列的表格\n                        </p>\n                        <div class="w-e-button-container">\n                            <button id="'+e+'" class="right">插入</button>\n                        </div>\n                    </div>',events:[{selector:"#"+e,type:"click",fn:function(){var e=parseInt((0,i.default)("#"+n).val()),o=parseInt((0,i.default)("#"+r).val());return e&&o&&e>0&&o>0&&t._insert(e,o),!0}}]}]});s.show(),this.panel=s},_insert:function(t,e){var n=void 0,i=void 0,o='<table border="0" width="100%" cellpadding="0" cellspacing="0">';for(n=0;n<t;n++){if(o+="<tr>",0===n)for(i=0;i<e;i++)o+="<th>&nbsp;</th>";else for(i=0;i<e;i++)o+="<td>&nbsp;</td>";o+="</tr>"}o+="</table><p><br></p>";var a=this.editor;a.cmd.do("insertHTML",o),a.cmd.do("enableObjectResizing",!1),a.cmd.do("enableInlineTableEditing",!1)},_createEditPanel:function(){var t=this,e=(0,o.getRandom)("add-row"),n=(0,o.getRandom)("add-col"),i=(0,o.getRandom)("del-row"),r=(0,o.getRandom)("del-col"),s=(0,o.getRandom)("del-table");new a.default(this,{width:320,tabs:[{title:"编辑表格",tpl:'<div>\n                        <div class="w-e-button-container" style="border-bottom:1px solid #f1f1f1;padding-bottom:5px;margin-bottom:5px;">\n                            <button id="'+e+'" class="left">增加行</button>\n                            <button id="'+i+'" class="red left">删除行</button>\n                            <button id="'+n+'" class="left">增加列</button>\n                            <button id="'+r+'" class="red left">删除列</button>\n                        </div>\n                        <div class="w-e-button-container">\n                            <button id="'+s+'" class="gray left">删除表格</button>\n                        </dv>\n                    </div>',events:[{selector:"#"+e,type:"click",fn:function(){return t._addRow(),!0}},{selector:"#"+n,type:"click",fn:function(){return t._addCol(),!0}},{selector:"#"+i,type:"click",fn:function(){return t._delRow(),!0}},{selector:"#"+r,type:"click",fn:function(){return t._delCol(),!0}},{selector:"#"+s,type:"click",fn:function(){return t._delTable(),!0}}]}]}).show()},_getLocationData:function(){var t={},e=this.editor.selection.getSelectionContainerElem();if(e){var n=e.getNodeName();if("TD"===n||"TH"===n){var i=e.parent(),o=i.children(),a=o.length;o.forEach(function(n,i){if(n===e[0])return t.td={index:i,elem:n,length:a},!1});var r=i.parent().children(),s=r.length;return r.forEach(function(e,n){if(e===i[0])return t.tr={index:n,elem:e,length:s},!1}),t}}},_addRow:function(){var t=this._getLocationData();if(t){var e=t.tr,n=(0,i.default)(e.elem),o=t.td.length,a=document.createElement("tr"),r="",s=void 0;for(s=0;s<o;s++)r+="<td>&nbsp;</td>";a.innerHTML=r,(0,i.default)(a).insertAfter(n)}},_addCol:function(){var t=this._getLocationData();if(t){var e=t.tr,n=t.td.index;(0,i.default)(e.elem).parent().children().forEach(function(t){var e=(0,i.default)(t).children().get(n),o=e.getNodeName().toLowerCase(),a=document.createElement(o);(0,i.default)(a).insertAfter(e)})}},_delRow:function(){var t=this._getLocationData();if(t){var e=t.tr;(0,i.default)(e.elem).remove()}},_delCol:function(){var t=this._getLocationData();if(t){var e=t.tr,n=t.td.index;(0,i.default)(e.elem).parent().children().forEach(function(t){(0,i.default)(t).children().get(n).remove()})}},_delTable:function(){var t=this.editor.selection.getSelectionContainerElem();if(t){var e=t.parentUntil("table");e&&e.remove()}},tryChangeActive:function(t){var e=this.editor,n=this.$elem,i=e.selection.getSelectionContainerElem();if(i){var o=i.getNodeName();"TD"===o||"TH"===o?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}}},e.default=s},385:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(294)),o=n(295),a=r(n(299));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){this.editor=t,this.$elem=(0,i.default)('<div class="w-e-menu"><i class="w-e-icon-play"></i></div>'),this.type="panel",this._active=!1}s.prototype={constructor:s,onClick:function(){this._createPanel()},_createPanel:function(){var t=this,e=(0,o.getRandom)("text-val"),n=(0,o.getRandom)("btn"),r=new a.default(this,{width:350,tabs:[{title:"插入视频",tpl:'<div>\n                        <input id="'+e+'" type="text" class="block" placeholder="格式如：<iframe src=... ></iframe>"/>\n                        <div class="w-e-button-container">\n                            <button id="'+n+'" class="right">插入</button>\n                        </div>\n                    </div>',events:[{selector:"#"+n,type:"click",fn:function(){var n=(0,i.default)("#"+e).val().trim();return n&&t._insert(n),!0}}]}]});r.show(),this.panel=r},_insert:function(t){this.editor.cmd.do("insertHTML",t+"<p><br></p>")}},e.default=s},386:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(294)),o=n(295),a=r(n(299));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){this.editor=t;var e=(0,o.getRandom)("w-e-img");this.$elem=(0,i.default)('<div class="w-e-menu" id="'+e+'"><i class="w-e-icon-image"></i></div>'),t.imgMenuId=e,this.type="panel",this._active=!1}s.prototype={constructor:s,onClick:function(){this.editor.config.qiniu||(this._active?this._createEditPanel():this._createInsertPanel())},_createEditPanel:function(){var t=this.editor,e=t._selectedImg[0].style,n=(0,o.getRandom)("img-width"),r=(0,o.getRandom)("img-height"),s=(0,o.getRandom)("img-max-width"),l=(0,o.getRandom)("img-max-height"),c=(0,o.getRandom)("width-30"),u=(0,o.getRandom)("width-50"),d=(0,o.getRandom)("width-80"),f=(0,o.getRandom)("width-100"),h=(0,o.getRandom)("reset-btn"),p=(0,o.getRandom)("del-btn"),m=[{title:"编辑图片",tpl:'<div style="font-size:14px;color:#666">\n                    <div class="w-e-button-container" style="border-bottom:1px solid #f1f1f1;padding-bottom:5px;margin-bottom:5px;">\n                        <span>原始宽度: '+t._selectedImg[0].naturalWidth+"</span>\n                        <br/>\n                        <span>原始高度: "+t._selectedImg[0].naturalHeight+'</span>\n                        <br/>\n                        <div style="margin:5px 0">\n                            <span style="display:inline-block;width:50px;text-align: right;">宽: </span>\n                            <input id="'+n+'" placeholder="width" value="'+e.width+'" style="border:none;border-bottom:1px solid black;" />\n                        </div>\n                        <div style="margin:5px 0">\n                            <span style="display:inline-block;width:50px;text-align: right;">高: </span>\n                            <input id="'+r+'" placeholder="height" value="'+e.height+'" style="border:none;border-bottom:1px solid black;" />\n                        </div>\n                        <div style="margin:5px 0">\n                            <span style="display:inline-block;width:50px;text-align: right;">最大宽: </span>\n                            <input id="'+s+'" placeholder="max width" value="'+e.maxWidth+'" style="border:none;border-bottom:1px solid black;" />\n                        </div>\n                        <div style="margin:5px 0">\n                            <span style="display:inline-block;width:50px;text-align: right;">最大高: </span>\n                            <input id="'+l+'" placeholder="max height" value="'+e.maxHeight+'" style="border:none;border-bottom:1px solid black;" />\n                        </div>\n                    </div>\n                    <hr/>\n                    <div class="w-e-button-container">\n                        <button id="'+c+'" class="gray left">30%</button>\n                        <button id="'+u+'" class="gray left">50%</button>\n                        <button id="'+d+'" class="gray left">80%</button>\n                        <button id="'+f+'" class="gray left">100%</button>\n                        <button id="'+p+'" class="gray left">删除图片</button>\n                        <button id="'+h+'" class="gray left">重置</button>\n                    </dv>\n                </div>',events:[{selector:"#"+n,type:"input",fn:function(){var e=t._selectedImg;return e&&e.css("width",(0,i.default)("#"+n).val()),!1}},{selector:"#"+r,type:"input",fn:function(){var e=t._selectedImg;return e&&e.css("height",(0,i.default)("#"+r).val()),!1}},{selector:"#"+s,type:"input",fn:function(){var e=t._selectedImg;return e&&e.css("max-width",(0,i.default)("#"+s).val()),!1}},{selector:"#"+l,type:"input",fn:function(){var e=t._selectedImg;return e&&e.css("max-height",(0,i.default)("#"+l).val()),!1}},{selector:"#"+c,type:"click",fn:function(){var e=t._selectedImg;return e&&(e.css("max-width","30%"),e.css("height","auto")),!1}},{selector:"#"+u,type:"click",fn:function(){var e=t._selectedImg;return e&&(e.css("max-width","50%"),e.css("height","auto")),!1}},{selector:"#"+d,type:"click",fn:function(){var e=t._selectedImg;return e&&(e.css("max-width","80%"),e.css("height","auto")),!1}},{selector:"#"+f,type:"click",fn:function(){var e=t._selectedImg;return e&&(e.css("max-width","100%"),e.css("height","auto")),!1}},{selector:"#"+h,type:"click",fn:function(){var e=t._selectedImg;return e&&e.removeAttr("style"),(0,i.default)("#"+n)[0].value="",(0,i.default)("#"+r)[0].value="",(0,i.default)("#"+s)[0].value="",(0,i.default)("#"+l)[0].value="",!1}},{selector:"#"+p,type:"click",fn:function(){var e=t._selectedImg;return e&&e.remove(),!1}}]}],v=new a.default(this,{width:300,tabs:m});v.show(),this.panel=v},_createInsertPanel:function(){var t=this.editor,e=t.uploadImg,n=t.config,r=(0,o.getRandom)("up-trigger"),s=(0,o.getRandom)("up-file"),l=(0,o.getRandom)("link-url"),c=(0,o.getRandom)("link-btn"),u=[{title:"上传图片",tpl:'<div class="w-e-up-img-container">\n                    <div id="'+r+'" class="w-e-up-btn">\n                        <i class="w-e-icon-upload2"></i>\n                    </div>\n                    <div style="display:none;">\n                        <input id="'+s+'" type="file" multiple="multiple" accept="image/jpg,image/jpeg,image/png,image/gif,image/bmp"/>\n                    </div>\n                </div>',events:[{selector:"#"+r,type:"click",fn:function(){var t=(0,i.default)("#"+s)[0];if(!t)return!0;t.click()}},{selector:"#"+s,type:"change",fn:function(){var t=(0,i.default)("#"+s)[0];if(!t)return!0;var n=t.files;return n.length&&e.uploadImg(n),!0}}]},{title:"网络图片",tpl:'<div>\n                    <input id="'+l+'" type="text" class="block" placeholder="图片链接"/></td>\n                    <div class="w-e-button-container">\n                        <button id="'+c+'" class="right">插入</button>\n                    </div>\n                </div>',events:[{selector:"#"+c,type:"click",fn:function(){var t=(0,i.default)("#"+l).val().trim();return t&&e.insertLinkImg(t),!0}}]}],d=[];(n.uploadImgShowBase64||n.uploadImgServer||n.customUploadImg)&&window.FileReader&&d.push(u[0]),n.showLinkImg&&d.push(u[1]);var f=new a.default(this,{width:300,tabs:d});f.show(),this.panel=f},tryChangeActive:function(t){var e=this.editor,n=this.$elem;e._selectedImg?(this._active=!0,n.addClass("w-e-active")):(this._active=!1,n.removeClass("w-e-active"))}},e.default=s},387:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294)),o=n(388),a=n(295);function r(t){this.editor=t}r.prototype={constructor:r,init:function(){this._bindEvent()},clear:function(){this.html("<p><br></p>")},html:function(t){var e=this.editor,n=e.$textElem,i=void 0;if(null==t)return i=n.html(),i=i.replace(/\u200b/gm,""),i;n.html(t),e.initSelection()},getJSON:function(){return function t(e){var n=[];return(e.childNodes()||[]).forEach(function(e){var o=void 0,r=e.nodeType;if(3===r&&(o=e.textContent,o=(0,a.replaceHtmlSymbol)(o)),1===r){(o={}).tag=e.nodeName.toLowerCase();for(var s=[],l=e.attributes||{},c=l.length||0,u=0;u<c;u++){var d=l[u];s.push({name:d.name,value:d.value})}o.attrs=s,o.children=t((0,i.default)(e))}n.push(o)}),n}(this.editor.$textElem)},text:function(t){var e=this.editor,n=e.$textElem,i=void 0;if(null==t)return i=n.text(),i=i.replace(/\u200b/gm,""),i;n.text("<p>"+t+"</p>"),e.initSelection()},append:function(t){var e=this.editor;e.$textElem.append((0,i.default)(t)),e.initSelection()},_bindEvent:function(){this._saveRangeRealTime(),this._enterKeyHandle(),this._clearHandle(),this._pasteHandle(),this._tabHandle(),this._imgHandle(),this._dragHandle()},_saveRangeRealTime:function(){var t=this.editor,e=t.$textElem;function n(e){t.selection.saveRange(),t.menus.changeActive()}e.on("keyup",n),e.on("mousedown",function(t){e.on("mouseleave",n)}),e.on("mouseup",function(t){n(),e.off("mouseleave",n)})},_enterKeyHandle:function(){var t=this.editor,e=t.$textElem;function n(e){var n=(0,i.default)("<p><br></p>");n.insertBefore(e),t.selection.createRangeByElem(n,!0),t.selection.restoreSelection(),e.remove()}e.on("keyup",function(i){13===i.keyCode&&function(i){var o=t.selection.getSelectionContainerElem(),a=o.parent();"<code><br></code>"!==a.html()?a.equal(e)&&"P"!==o.getNodeName()&&(o.text()||n(o)):n(o)}()}),e.on("keydown",function(e){13===e.keyCode?function(e){var n=t.selection.getSelectionContainerElem();if(n){var o=n.parent(),a=n.getNodeName(),r=o.getNodeName();if("CODE"===a&&"PRE"===r&&t.cmd.queryCommandSupported("insertHTML")){if(!0===t._willBreakCode){var s=(0,i.default)("<p><br></p>");return s.insertAfter(o),t.selection.createRangeByElem(s,!0),t.selection.restoreSelection(),t._willBreakCode=!1,void e.preventDefault()}var l=t.selection.getRange().startOffset;t.cmd.do("insertHTML","\n"),t.selection.saveRange(),t.selection.getRange().startOffset===l&&t.cmd.do("insertHTML","\n");var c=n.html().length;t.selection.getRange().startOffset+1===c&&(t._willBreakCode=!0),e.preventDefault()}}}(e):t._willBreakCode=!1})},_clearHandle:function(){var t=this.editor,e=t.$textElem;e.on("keydown",function(t){8===t.keyCode&&("<p><br></p>"!==e.html().toLowerCase().trim()||t.preventDefault())}),e.on("keyup",function(n){if(8===n.keyCode){var o=void 0,a=e.html().toLowerCase().trim();a&&"<br>"!==a||(o=(0,i.default)("<p><br/></p>"),e.html(""),e.append(o),t.selection.createRangeByElem(o,!1,!0),t.selection.restoreSelection())}})},_pasteHandle:function(){var t=this.editor,e=t.config,n=e.pasteFilterStyle,i=e.pasteTextHandle,r=e.pasteIgnoreImg,s=t.$textElem,l=0;function c(){var t=Date.now(),e=!1;return t-l>=100&&(e=!0),l=t,e}s.on("paste",function(e){if(!a.UA.isIE()&&(e.preventDefault(),c())){var s=(0,o.getPasteHtml)(e,n,r),u=(0,o.getPasteText)(e);u=u.replace(/\n/gm,"<br>");var d=t.selection.getSelectionContainerElem();if(d){var f=d.getNodeName();if("CODE"===f||"PRE"===f){var h=(0,o.getPasteText)(e,!0);return i&&(0,a.isFunction)(i)&&(h=""+(i(h)||"")),void t.cmd.do("insertHTML",""+h)}if(s)try{i&&(0,a.isFunction)(i)&&(s=""+(i(s)||"")),t.cmd.do("insertHTML",s)}catch(e){i&&(0,a.isFunction)(i)&&(u=""+(i(u)||"")),t.cmd.do("insertHTML","<p>"+u+"</p>")}else l=0}}}),s.on("paste",function(e){if(!a.UA.isIE()&&(e.preventDefault(),c())){var n=(0,o.getPasteImgs)(e);if(n&&n.length){var i=t.selection.getSelectionContainerElem();if(i){var r=i.getNodeName();if("CODE"!==r&&"PRE"!==r)t.uploadImg.uploadImg(n)}}}})},_tabHandle:function(){var t=this.editor;t.$textElem.on("keydown",function(e){if(9===e.keyCode&&t.cmd.queryCommandSupported("insertHTML")){var n=t.selection.getSelectionContainerElem();if(n){var i=n.parent(),o=n.getNodeName(),a=i.getNodeName();"CODE"===o&&"PRE"===a?t.cmd.do("insertHTML","    "):t.cmd.do("insertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),e.preventDefault()}}})},_imgHandle:function(){var t=this.editor,e=t.$textElem;e.on("click","img",function(e){var n=(0,i.default)(this);"1"!==n.attr("data-w-e")&&(t._selectedImg=n,t.selection.createRangeByElem(n),t.selection.restoreSelection())}),e.on("click  keyup",function(e){e.target.matches("img")||(t._selectedImg=null)})},_dragHandle:function(){var t=this.editor;(0,i.default)(document).on("dragleave drop dragenter dragover",function(t){t.preventDefault()}),t.$textElem.on("drop",function(e){e.preventDefault();var n=e.dataTransfer&&e.dataTransfer.files;n&&n.length&&t.uploadImg.uploadImg(n)})}},e.default=r},388:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPasteText=o,e.getPasteHtml=function(t,e,n){var o=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData,a=void 0,r=void 0;null==o?a=window.clipboardData&&window.clipboardData.getData("text"):(a=o.getData("text/plain"),r=o.getData("text/html"));!r&&a&&(r="<p>"+(0,i.replaceHtmlSymbol)(a)+"</p>");if(!r)return;var s=r.split("</html>");2===s.length&&(r=s[0]);r=(r=(r=r.replace(/<(meta|script|link).+?>/gim,"")).replace(/<!--.*?-->/gm,"")).replace(/\s?data-.+?=('|").+?('|")/gim,""),n&&(r=r.replace(/<img.+?>/gim,""));r=e?r.replace(/\s?(class|style)=('|").*?('|")/gim,""):r.replace(/\s?class=('|").*?('|")/gim,"");return r},e.getPasteImgs=function(t){var e=[];if(o(t))return e;var n=(t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData||{}).items;if(!n)return e;return(0,i.objForEach)(n,function(t,n){var i=n.type;/image/i.test(i)&&e.push(n.getAsFile())}),e};!function(t){t&&t.__esModule}(n(294));var i=n(295);function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData,o=void 0;return o=null==n?window.clipboardData&&window.clipboardData.getData("text"):n.getData("text/plain"),e?o:(0,i.replaceHtmlSymbol)(o)}},389:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294));n(295);function o(t){this.editor=t}o.prototype={constructor:o,do:function(t,e){var n=this.editor;if(n._useStyleWithCSS||(document.execCommand("styleWithCSS",null,!0),n._useStyleWithCSS=!0),n.selection.getRange()){n.selection.restoreSelection();var i="_"+t;this[i]?this[i](e):this._execCommand(t,e),n.menus.changeActive(),n.selection.saveRange(),n.selection.restoreSelection(),n.change&&n.change()}},_insertHTML:function(t){var e=this.editor.selection.getRange();this.queryCommandSupported("insertHTML")?this._execCommand("insertHTML",t):e.insertNode?(e.deleteContents(),e.insertNode((0,i.default)(t)[0])):e.pasteHTML&&e.pasteHTML(t)},_insertElem:function(t){var e=this.editor.selection.getRange();e.insertNode&&(e.deleteContents(),e.insertNode(t[0]))},_execCommand:function(t,e){document.execCommand(t,!1,e)},queryCommandValue:function(t){return document.queryCommandValue(t)},queryCommandState:function(t){return document.queryCommandState(t)},queryCommandSupported:function(t){return document.queryCommandSupported(t)}},e.default=o},390:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294)),o=n(295);function a(t){this.editor=t,this._currentRange=null}a.prototype={constructor:a,getRange:function(){return this._currentRange},saveRange:function(t){if(t)this._currentRange=t;else{var e=window.getSelection();if(0!==e.rangeCount){var n=e.getRangeAt(0),i=this.getSelectionContainerElem(n);if(i)if("false"!==i.attr("contenteditable")&&!i.parentUntil("[contenteditable=false]"))this.editor.$textElem.isContain(i)&&(this._currentRange=n)}}},collapseRange:function(t){null==t&&(t=!1);var e=this._currentRange;e&&e.collapse(t)},getSelectionText:function(){return this._currentRange?this._currentRange.toString():""},getSelectionContainerElem:function(t){var e=void 0;if(t=t||this._currentRange)return e=t.commonAncestorContainer,(0,i.default)(1===e.nodeType?e:e.parentNode)},getSelectionStartElem:function(t){var e=void 0;if(t=t||this._currentRange)return e=t.startContainer,(0,i.default)(1===e.nodeType?e:e.parentNode)},getSelectionEndElem:function(t){var e=void 0;if(t=t||this._currentRange)return e=t.endContainer,(0,i.default)(1===e.nodeType?e:e.parentNode)},isSelectionEmpty:function(){var t=this._currentRange;return!(!t||!t.startContainer||t.startContainer!==t.endContainer||t.startOffset!==t.endOffset)},restoreSelection:function(){var t=window.getSelection();t.removeAllRanges(),t.addRange(this._currentRange)},createEmptyRange:function(){var t=this.editor,e=this.getRange(),n=void 0;if(e&&this.isSelectionEmpty())try{o.UA.isWebkit()?(t.cmd.do("insertHTML","&#8203;"),e.setEnd(e.endContainer,e.endOffset+1),this.saveRange(e)):(n=(0,i.default)("<strong>&#8203;</strong>"),t.cmd.do("insertElem",n),this.createRangeByElem(n,!0))}catch(t){}},createRangeByElem:function(t,e,n){if(t.length){var i=t[0],o=document.createRange();n?o.selectNodeContents(i):o.selectNode(i),"boolean"==typeof e&&o.collapse(e),this.saveRange(o)}}},e.default=a},391:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(277)),o=n(295),a=r(n(392));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){this.editor=t}s.prototype={constructor:s,_alert:function(t,e){var n=this.editor,i=n.config.debug,o=n.config.customAlert;if(i)throw new Error("wangEditor: "+(e||t));o&&"function"==typeof o?o(t):alert(t)},insertLinkImg:function(t){var e=this;if(t){var n=this.editor,i=n.config,o=i.linkImgCheck,a=void 0;if(o&&"function"==typeof o&&"string"==typeof(a=o(t)))alert(a);else{n.cmd.do("insertHTML",'<img src="'+t+'" style="max-width:100%;"/>');var r=document.createElement("img");r.onload=function(){var e=i.linkImgCallback;e&&"function"==typeof e&&e(t),r=null},r.onerror=function(){r=null,e._alert("插入图片错误",'wangEditor: 插入图片出错，图片链接是 "'+t+'"，下载该链接失败')},r.onabort=function(){r=null},r.src=t}}},uploadImg:function(t){var e=this;if(t&&t.length){var n=this.editor,r=n.config,s=r.uploadImgServer,l=r.uploadImgShowBase64,c=r.uploadImgMaxSize,u=c/1024/1024,d=r.uploadImgMaxLength||1e4,f=r.uploadFileName||"",h=r.uploadImgParams||{},p=r.uploadImgParamsWithUrl,m=r.uploadImgHeaders||{},v=r.uploadImgHooks||{},g=r.uploadImgTimeout||3e3,_=r.withCredentials;null==_&&(_=!1);var y=r.customUploadImg;if(y||s||l){var b=[],w=[];if((0,o.arrForEach)(t,function(t){var e=t.name,n=t.size;e&&n&&(!1!==/\.(jpg|jpeg|png|bmp|gif|webp)$/i.test(e)?c<n?w.push("【"+e+"】大于 "+u+"M"):b.push(t):w.push("【"+e+"】不是图片"))}),w.length)this._alert("图片验证未通过: \n"+w.join("\n"));else if(b.length>d)this._alert("一次最多上传"+d+"张图片");else if(y&&"function"==typeof y)y(b,this.insertLinkImg.bind(this));else{var x=new FormData;if((0,o.arrForEach)(b,function(t){var e=f||t.name;x.append(e,t)}),s&&"string"==typeof s){var C=s.split("#");s=C[0];var E=C[1]||"";(0,o.objForEach)(h,function(t,e){p&&(s.indexOf("?")>0?s+="&":s+="?",s=s+t+"="+e),x.append(t,e)}),E&&(s+="#"+E);var k=new XMLHttpRequest;if(k.open("POST",s),k.timeout=g,k.ontimeout=function(){v.timeout&&"function"==typeof v.timeout&&v.timeout(k,n),e._alert("上传图片超时")},k.upload&&(k.upload.onprogress=function(t){var e=void 0,i=new a.default(n);t.lengthComputable&&(e=t.loaded/t.total,i.show(e))}),k.onreadystatechange=function(){var t=void 0;if(4===k.readyState){if(k.status<200||k.status>=300)return v.error&&"function"==typeof v.error&&v.error(k,n),void e._alert("上传图片发生错误","上传图片发生错误，服务器返回状态是 "+k.status);if("object"!==(void 0===(t=k.responseText)?"undefined":(0,i.default)(t)))try{t=JSON.parse(t)}catch(i){return v.fail&&"function"==typeof v.fail&&v.fail(k,n,t),void e._alert("上传图片失败","上传图片返回结果错误，返回结果是: "+t)}if(v.customInsert||"0"==t.errno){if(v.customInsert&&"function"==typeof v.customInsert)v.customInsert(e.insertLinkImg.bind(e),t,n);else(t.data||[]).forEach(function(t){e.insertLinkImg(t)});v.success&&"function"==typeof v.success&&v.success(k,n,t)}else v.fail&&"function"==typeof v.fail&&v.fail(k,n,t),e._alert("上传图片失败","上传图片返回结果错误，返回结果 errno="+t.errno)}},v.before&&"function"==typeof v.before){var S=v.before(k,n,b);if(S&&"object"===(void 0===S?"undefined":(0,i.default)(S))&&S.prevent)return void this._alert(S.msg)}return(0,o.objForEach)(m,function(t,e){k.setRequestHeader(t,e)}),k.withCredentials=_,void k.send(x)}l&&(0,o.arrForEach)(t,function(t){var n=e,i=new FileReader;i.readAsDataURL(t),i.onload=function(){n.insertLinkImg(this.result)}})}}}}},e.default=s},392:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(294));function o(t){this.editor=t,this._time=0,this._isShow=!1,this._isRender=!1,this._timeoutId=0,this.$textContainer=t.$textContainerElem,this.$bar=(0,i.default)('<div class="w-e-progress"></div>')}o.prototype={constructor:o,show:function(t){var e=this;if(!this._isShow){this._isShow=!0;var n=this.$bar;if(this._isRender)this._isRender=!0;else this.$textContainer.append(n);Date.now()-this._time>100&&t<=1&&(n.css("width",100*t+"%"),this._time=Date.now());var i=this._timeoutId;i&&clearTimeout(i),i=setTimeout(function(){e._hide()},500)}},_hide:function(){this.$bar.remove(),this._time=0,this._isShow=!1,this._isRender=!1}},e.default=o},393:function(t,e,n){},394:function(t,e,n){"use strict";var i=n(307);n.n(i).a},395:function(t,e,n){"use strict";var i=n(308);n.n(i).a},413:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-add"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingArticle,expression:"loadingArticle"},{name:"show",rawName:"v-show",value:t.loadingArticle,expression:"loadingArticle"}],staticClass:"loading-mask"}),t._v(" "),n("h1",{staticClass:"title"},[t._v("新增文章")]),t._v(" "),n("div",{staticClass:"item-box"},[n("span",[t._v("标题:")]),t._v(" "),n("el-input",{staticClass:"item-input",attrs:{placeholder:"请输入标题",clearable:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),n("div",{staticClass:"item-box"},[n("span",[t._v("标签:")]),t._v(" "),n("el-select",{staticClass:"item-input",attrs:{placeholder:"请选择标签",multiple:""},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}},t._l(t.tagList,function(t){return n("el-option",{key:t.pid,attrs:{label:t.content,value:t.pid}})}),1)],1),t._v(" "),n("div",{staticClass:"item-box"},[n("span",[t._v("简介:")]),t._v(" "),n("el-input",{staticClass:"item-input",attrs:{type:"textarea",placeholder:"请输入简介",clearable:"",rows:"5"},model:{value:t.summary,callback:function(e){t.summary=e},expression:"summary"}})],1),t._v(" "),n("div",{staticClass:"item-box"},[n("span",[t._v("封面:")]),t._v(" "),n("el-upload",{staticClass:"img-uploader",attrs:{action:"","http-request":t.uploadImg,"show-file-list":!1}},[t.picture?n("img",{staticClass:"img",attrs:{src:t.picture,alt:""}}):n("div",[n("div",{staticClass:"img-uploader-icon"},[t._v("\n          "+t._s(parseInt(t.loadingStyle.height)>0?t.loadingStyle.height:"+")+"\n        ")]),t._v(" "),n("div",{staticClass:"upload-progress",style:t.loadingStyle})])]),t._v(" "),n("el-button",{staticClass:"delete-btn",attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){t.picture=null}}})],1),t._v(" "),n("el-button",{staticClass:"full-screen-btn",attrs:{type:"primary",icon:"el-icon-full-screen"},on:{click:function(e){t.isShowEditor=!0}}},[t._v("查看/编辑内容")]),t._v(" "),n("Editor",{attrs:{value:t.content,setup:t.isSetupEditor,show:t.isShowEditor},on:{change:t.onEditorChange,onSave:t.handleSubmit,onClose:function(e){t.isShowEditor=!1}}}),t._v(" "),n("el-row",{staticClass:"submit-box",attrs:{type:"flex",justify:"center"}},[n("el-button",{attrs:{type:"primary",round:"",loading:t.loading},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)},o=[];i._withStripped=!0,n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},430:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:["editor-warp","fullScreen",t.closeAnimation?"closeAnimation":""],on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.onClose(e)}}},[n("div",{staticClass:"mask",on:{click:function(e){return e.target!==e.currentTarget?null:t.onClose(e)}}},[n("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.editorUploadProgress>0,expression:"editorUploadProgress > 0"}],staticClass:"upload-progress",attrs:{type:"circle",percentage:t.editorUploadProgress,status:t.editorUploadProgress>=100?"success":null}}),t._v(" "),n("div",{staticClass:"editor-box"},[n("div",{staticClass:"toolBar",attrs:{id:"toolBar"}}),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.setup,expression:"!setup"}],staticClass:"editor",attrs:{id:"editor","element-loading-text":"拼命加载中"},on:{keydown:[function(e){return(e.type.indexOf("key")||83===e.keyCode)&&e.ctrlKey?(e.preventDefault(),e.stopPropagation(),t.onSave(e)):null},function(e){return(e.type.indexOf("key")||83===e.keyCode)&&e.metaKey?(e.preventDefault(),e.stopPropagation(),t.onSave(e)):null}]}})])],1)])},o=[];i._withStripped=!0,n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})}}]);